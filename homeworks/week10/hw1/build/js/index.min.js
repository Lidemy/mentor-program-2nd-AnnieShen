"use strict";function submit_check(){confirm("確定要修改留言嗎?")}function delete_check(){confirm("確定要刪除留言嗎?")}function delete_msg(){$(".deleteComments").submit(function(t){t.preventDefault(),console.log($(t.target).find(".comment_id").val());var e=$(t.target).find(".comment_id").val();$.ajax({type:"POST",url:"deleteComments.php",data:{comment_id:e},success:function(e){console.log("response:",e),"success"===JSON.parse(e).result&&$(t.target).parent().parent().parent().parent().remove()}})})}function update_msg(){$(".updateComments").submit(function(t){t.preventDefault(),console.log($(t.target).find(".comment_id").val());var e=$(t.target).find(".comment_id").val(),n=$(t.target).find("textarea[name=content]").val();$.ajax({type:"POST",url:"updateComments.php",data:{comment_id:e,content:n},success:function(e){console.log("response:",e),"success"===JSON.parse(e).result&&$(t.target).parent().children(".show_content_text").text("\n            "+n+"\n            ")}})})}$(document).ready(function(){$(".writeComments").submit(function(n){n.preventDefault();var s=$(n.target).find("textarea[name=writeContent]").val(),a=$(n.target).find(".id").data("id"),i=$(n.target).find(".name").data("id");console.log(s,a,i),$.ajax({type:"POST",url:"writeComments.php",data:{writeContent:s},success:function(e){console.log("response:",e);var t=JSON.parse(e);"success"===t.result&&($(".reply").prepend('\n          <div class="reply_wrap row">\x3c!--.reply_wrap--\x3e\n            <div class="main_reply list">\n          \n          <div class="userInfo"> \n            \n            <div class="id">'+a+'</div>\n            <div class="name">'+i+'</div>\n            <div class="date">'+t.time+'</div>\n            <div class="show_content">\n              <div class="show_content_text">'+s+'</div>\n            \n              \n                  <form action="updateComments.php" class="updateComments" method="POST" onsubmit="return submit_check();">\n                    <input type="button" value="編輯" class="edit_btn edit'+t.id+'">\n                    \n                    <div class="edit_box edit_box'+t.id+'">\n                      <textarea cols="50" rows="5" name="content" class="text text_edit">'+s+'</textarea>\n                      <input type="hidden" name="comment_id" class="comment_id" value="'+t.id+'">\n                      <input type="submit" value="修改留言" class="btn-edit">\n                    </div>\n                  </form>\n\n                  <form id="deleteComments" class="deleteComments" method="POST" onsubmit="return delete_check();">\n                    <input type="hidden" name="comment_id" class="comment_id" value="'+t.id+'">\n                    <input type="submit" value="刪除" class="delete_btn">\n                  </form>\n                \n\n                </div>\x3c!--.show_content--\x3e  \n            </div>\x3c!--.user_info--\x3e    \n  \n          \n        </div>\x3c!--under_reply--\x3e\n    \n      <form action="underComments.php" class="underComments" method="POST">      \n        <div class="">\n          <div class="">\n            <textarea cols="50" rows="5" name="writeContentChild" class="text"></textarea>\n            <div class="btn-wrap"><input type="submit" id="add" class="btn btn-info" value="回覆"></div>\n            <input type="hidden" name="commentsId" value="'+t.id+'">\n          </div>\n        </div>\n      </form>\n    </div>\x3c!--.reply_wrap--\x3e\n                \n\n            '),delete_msg(),update_msg(),$(n.target).find("textarea[name=writeContent]").val(""))}})}),delete_msg(),update_msg()});